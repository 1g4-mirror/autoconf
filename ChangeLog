2001-06-23  Akim Demaille  <akim@epita.fr>

	* doc/autoconf.texi (Redefined M4 Macros): New.

2001-06-23  Akim Demaille  <akim@epita.fr>

	* doc/autoconf.texi (Redefined M4 Macros):

	* acgeneral.m4 (_AC_INCLUDES_DEFAULT_REQUIREMENTS): Consider
	inttypes.h is missing if it conflicts with sys/types.h, as on IRIX
	5.3.

2001-06-23  Paolo Bonzini <bonzini@gnu.org>

	* acgeneral.m4 (_AC_OUTPUT_CONFIG_STATUS): Defer parsing of
	config.status targets to after the evaluation of the INIT-CMDS.
	Double quote config.status targets (used to be single quoted).

2001-06-23  Akim Demaille  <akim@epita.fr>

	* tests/torture.at (CONFIG_FILES, HEADERS, LINKS and COMMANDS):
	Check the content of the created file.
	Check the ./config.status command line invocation.

2001-06-23  Akim Demaille  <akim@epita.fr>

	* tests/foreign.at (Libtool): Reject prehistoric versions.

2001-06-23  Akim Demaille  <akim@epita.fr>

	* aclang.m4 (_AC_COMPILER_EXEEXT_DEFAULT): Try to be robust to
	preexisting files matching a.*.

2001-06-23  Akim Demaille  <akim@epita.fr>

	* acgeneral.m4 (_AC_ARG_VAR_VALIDATE): Output error messages on
	stderr.
	* doc/autoconf.texi (AC_ARG_VAR): Update.

2001-06-21  Akim Demaille  <akim@epita.fr>

	* acgeneral.m4 (_AC_ARG_VAR_VALIDATE): Die instead of warning when
	precious variables have changed.
	* tests/torture.at (AC_ARG_VAR): Adjust.

2001-06-21  Akim Demaille  <akim@epita.fr>

	./configure --program-suffix=foo produces `transform=s,$$,foo,;',
	but some sed choke on multiple `;', and other tools (e.g.,
	Automake), include the separator themselves.

	* acgeneral.m4 (AC_ARG_VAR): Be sure not to leave extra `;'.

2001-06-19  Tim Van Holder  <tim.van.holder@pandora.be>

	* doc/autoconf.texi (Functions Portability): Rename as...
	(Function Portability): this.
	(Function Portability): Document potential problems with unlink().

2001-06-19  Paul Eggert  <eggert@twinsun.com>

	* NEWS, doc/autoconf.texi: Document quadrigraphs.

2001-06-18  Akim Demaille  <akim@epita.fr>

	* acfunctions.m4 (AC_FUNC_FORK): Fix typos.

2001-06-18  Rüdiger Kuhlmann  <info@ruediger-kuhlmann.de>

	* acfunctions.m4: (AC_FUNC_VFORK) rename as...
	(_AC_FUNC_VFORK): this.
	Remove AC_DEFINEs and don't guess cross-compilation values.
	(_AC_FUNC_FORK): New, check whether fork() isn't just a stub.
	(AC_FUNC_FORK): New, use _AC_FUNC_VFORK and _AC_FUNC_FORK to
	define HAVE_WORKING_FORK, HAVE_WORKING_VFORK; and vfork to fork if
	vfork doesn't work.
	Guess values if cross-compiling, but warn.
	* acfunctions: Add AC_FUNC_FORK.
	* doc/autoconf.texi: Document AC_FUNC_FORK. Give example to define
	and vfork appropriately.

2001-06-18  Akim Demaille  <akim@epita.fr>

	* doc/autoconf.texi (Functions Portability): New section.

2001-06-18  Akim Demaille  <akim@epita.fr>

	* autoconf.in (M4): Pass --nesting-limit=1024, unless already set
	in $M4.
	Suggested by Andreas Schwab.

2001-06-18  Akim Demaille  <akim@epita.fr>

	* acfunctions.m4 (AC_FUNC_CHOWN, AC_FUNC_CLOSEDIR_VOID)
	(AC_FUNC_GETPGRP, AC_FUNC_LSTAT_FOLLOWS_SLASHED_SYMLINK)
	(AC_FUNC_MMAP, AC_FUNC_SELECT_ARGTYPES, _AC_FUNC_STAT)
	(AC_FUNC_UTIME_NULL): Use AC_INCLUDES_DEFAULT.
	Don't use AC_TRY_RUN, which double quotes, prefer AC_RUN_IFELSE,
	and either AC_LANG_SOURCE or AC_LANG_PROGRAM.
	(AC_FUNC_CLOSEDIR_VOID): Protect C++ from `int closedir ();' (or
	the converse).

2001-06-18  Akim Demaille  <akim@epita.fr>

	* doc/autoconf.texi (ms): New index.
	(Macro Index): Rename as...
	(Autoconf Macro Index): this.
	(M4 Macro Index): New appendix.
	(Programming in M4): New chapter.
	Define M4sugar, M4sh, m4_pattern_forbid, and m4_pattern_allow.
	(Quoting): Rename as...
	(M$ Quotation): this.
	Be part of `Programming in M4).

2001-06-18  Nicolas Joly  <njoly@pasteur.fr>

	* tests/torture.at (AC_ARG_VAR): Set variables and export them
	in separate statements for compatibility with Tru64 v5.1.

2001-06-17  Akim Demaille  <akim@epita.fr>

	* acgeneral.m4 (_AC_ARG_VAR_VALIDATE): Be sure to cache the
	current values of the precious variables, not the previously
	cached values.
	Pass precious variables which are set to config.status.
	* doc/autoconf.texi (Setting Output Variables): Document AC_ARG_VAR.
	* tests/torture.at (AC_ARG_VAR): New.

2001-06-15  Paul Eggert  <eggert@twinsun.com>

	* doc/autoconf.texi: Move AC_FUNC_WAIT3 and
	AC_SYS_RESTARTABLE_SYSCALLS to the obsolete section,
	and explain why and how to replace them.
	* acfunctions.m4 (AC_FUNC_WAIT3): Warn as obsolete.
	* acspecific.m4 (AC_SYS_RESTARTABLE_SYSCALLS): Likewise.

2001-06-15  Akim Demaille  <akim@epita.fr>

	`build_alias', `host_alias', and `target_alias' are not AC_SUBST'd.
	Reported by Bruno Haible.

	* acgeneral.m4 (AC_ARG_VAR): Move the AC_SUBST, from here...
	 (_AC_ARG_VAR_PRECIOUS): to here.

2001-06-15  Pavel Roskin  <proski@gnu.org>

	* acheaders.m4 (_AC_CHECK_HEADER_DIRENT): Instead of defining
	an unused pointer use cast to this type and `if' statement to
	avoid warnings from the compiler.
	(AC_HEADER_TIME): Likewise.
	* actypes.m4 (AC_CHECK_MEMBER): s/foo/ac_aggr/. Use the member
	in `if' statement to avoid warnings from the compiler. Declare
	ac_aggr static to avoid the need to initialize it.

2001-06-14  Akim Demaille  <akim@epita.fr>

	* doc/autoconf.texi (Portable Shell): Move to follow `Writing
	Macros'.

2001-06-13  Akim Demaille  <akim@epita.fr>

	* m4/missing.m4, config/missing: Updated to Automake 1.4g's.
	Suggested by Alexander Mai.

2001-06-13  Akim Demaille  <akim@epita.fr>

	* acgeneral.m4 (_AC_INCLUDES_DEFAULT_REQUIREMENTS): Guard
	sys/types.h and sys/stat.h, and check for them.

2001-06-13  Akim Demaille  <akim@epita.fr>

	* acheaders.m4 (AC_CHECK_HEADER, AC_CHECK_HEADERS): Support $4 =
	INCLUDES.

2001-06-12  Maciej W. Rozycki  <macro@ds2.pg.gda.pl>

	* acspecific.m4 (AC_PATH_XTRA): Check if linking against libX11
	succeeds and only try adding libdnet upon a failure.

2001-06-12  Akim Demaille  <akim@epita.fr>

	* autoscan.in (&output_kind): Output the comment only if it exists.
	(%kind_comment): Add entry for `programs'.
	(&output_programs): Use &output_kind.
	(&output_functions, &output_identifiers, &output_headers)
	(&output_programs): Inline, and remove.

2001-06-12  Akim Demaille  <akim@epita.fr>

	* autoscan.in (%kind_comment): New.
	(output_kind): New.
	(output_functions, output_identifiers, output_headers): Use it.

2001-06-12  Akim Demaille  <akim@epita.fr>

	* autoscan.in (&print_unique): Take `$kind' and `$word' as
	arguments, to factor indirections into `%macro' and `%used'.
	(%generic_macro): Fix a typo.

2001-06-12  Akim Demaille  <akim@epita.fr>

	* aclibraries: New.
	* autoscan.in (@kinds): Add `libraries'.
	Use `@kinds' instead of hard coded lists.
	(%programs, %headers, %identifiers, %makevars, %libraries, %functions):
	Remove, replaced by...
	(%used): this.

2001-06-12  Akim Demaille  <akim@epita.fr>

	* autoscan.in (%functions_macros %headers_macros)
	(%identifiers_macros %programs_macros %makevars_macros): Remove,
	replaced by...
	(%macro): New.

2001-06-11  Raja R Harinath  <harinath@cs.umn.edu>

	* aclang.m4 (AC_NO_EXECUTABLES): Override
	_AC_COMPILER_EXEEXT_WORKS, not _AC_LANG_COMPILER_WORKS.

2001-06-11  Akim Demaille  <akim@epita.fr>

	* aclang.m4 (AC_NO_EXECUTABLES): Define the macros with their
	trailing new line.
	Reported by Andreas Schwab.

2001-06-11  Akim Demaille  <akim@epita.fr>

	* Makefile.am, Makefile.maint: Typos.

2001-06-09  Akim Demaille  <akim@epita.fr>

	* doc/autoconf.texi (Here-Documents): New section, gathering
	documentation about here-documents.
	Use `href', not `uref', and other changes.

2001-06-09  Akim Demaille  <akim@epita.fr>

	* doc/autoconf.texi (Portable Shell Programming): Promoted as a
	chapter.

2001-06-09  Akim Demaille  <akim@epita.fr>

	* doc/autoconf.texi (Limitations of Builtins): Complete the
	description of the here-docs penalties with Alexandre Oliva's
	explanations.

2001-06-01  Paul Eggert  <eggert@twinsun.com>

	* doc/autoconf.texi: Talk about here documents and speedups.
	Do not use "echo" on arbitrary strings.
	Spell "here-documents" consistently with the standard.

2001-06-09  Akim Demaille  <akim@epita.fr>

	* doc/autoconf.texi (Concept Index): Introduce it.
	Regenerate the menus.

2001-06-09  Akim Demaille  <akim@epita.fr>

	* Makefile.maint, GNUmakefile: New, from Jim Meyering.
	* config/prev-version.txt: New.
	* config/move-if-change: New, for GNU libc.

2001-06-06  Pavel Roskin  <proski@gnu.org>

	* tests/atgeneral.m4 (AT_INIT): Remove "/bin/sh" after $SHELL.

2001-06-06  Akim Demaille  <akim@epita.fr>

	* acgeneral.m4 (AC_CHECK_LIB): Fix the cache var name to work
	properly when $1 is not a literal.
	Fixes PR Autoconf/187, reported by Bram Moolenaar.

2001-06-06  Akim Demaille  <akim@epita.fr>

	Invoking AC_COPYRIGHT before AC_INIT fails.

	* Makefile.am (.m4.m4f): Pass --fatal-warnings to m4.
	* acgeneral.m4 (_m4_divert(VERSION_FSF))
	(_m4_divert(VERSION_USER)): New.
	(AC_COPYRIGHT): $2 is the diversion to use.
	(_AC_INIT_COPYRIGHT): Use the FSF diversion.
	(AC_INIT): Remove dead comments as now it's commutative.

2001-06-06  Akim Demaille  <akim@epita.fr>

	* tests/semantics.at (AC_CHECK_LIB): Strengthen to reflect
	PR autoconf/187.

2001-06-05  Akim Demaille  <akim@epita.fr>

	* acgeneral.m4 (_AC_INIT_PARSE_ARGS): `prefix' and `exec_prefix'
	can be empty.
	`*dir' variables cannot be NONE.
	Reported by Mark Kettenis.

2001-06-05  Paul Eggert  <eggert@twinsun.com>

	* doc/autoconf.texi: Fix references to Solaris and SunOS versions.

2001-06-04  Akim Demaille  <akim@epita.fr>

	* acgeneral.m4 (AC_VAR_SET, AC_VAR_GET, AC_VAR_TEST_SET)
	(AC_VAR_SET_IFELSE, AC_VAR_PUSHDEF and AC_VAR_POPDEF, AC_TR_CPP)
	(AC_TR_SH): Move as...
	* m4sh.m4 (AS_VAR_SET, AS_VAR_GET, AS_VAR_TEST_SET)
	(AS_VAR_SET_IF, AC_VAR_PUSHDEF, AS_VAR_POPDEF, AS_TR_CPP)
	(AS_TR_SH): these.
	(_AS_TR_PREPARE, _AS_CR_PREPARE, _AS_TR_CPP_PREPARE)
	(_AS_TR_SH_PREPARE): New.
	(AS_SHELL_SANITIZE): Invoke _AS_TR_PREPARE.
	* tests/aclocal.m4 (AC_STATE_SAVE): `as_' vars can be modified.

2001-06-02  Akim Demaille  <akim@epita.fr>

	* Makefile.am (.m4.m4f): Pass the options first.
	Fixes PR autoconf/182.

2001-06-02  Nathan Sidwell  <nathan@codesourcery.com>

	GNU getopt, when POSIXLY_CORRECT does not permute options and
	arguments.  So pass the options first.
	Fixes PR autoconf/184.

	* autoconf.sh (m4_prefiles, m4f_prefiles): New variables.
	(run_m4): Remove files.
	(run_m4f): Remove.
	Update remainder of script to use them.
	(for warning in): Do not use a literal comma as it will not be
	split by IFS.

2001-06-02  Christian Marquardt  <marq@gfz-potsdam.de>

	* aclang.m4 (AC_PROG_F77): Add Fujitsu's "frt" to the list of
	Fortran compilers to check.
	(_AC_PROG_F77_V): Add '-###' as a possible option to print
	information on library and object files.
	(AC_PROG_CXX): Add Fujitsu's "FCC" to the list of C++ compilers
	to check.

2001-06-02  Akim Demaille  <akim@epita.fr>

	* autom4te.in (Request::@request): Declare with `vars', not `my',
	as it prevents updates via `do FILENAME'.

2001-06-02  Akim Demaille  <akim@epita.fr>

	* configure.in (standards_texi): Remove, dead code.

2001-06-02  Akim Demaille  <akim@epita.fr>

	* autom4te.in: New.

2001-06-02  Pavel Roskin  <proski@gnu.org>

	* acgeneral.m4 (_AC_INIT_PREPARE): Don't rely on $? in the traps
	for signals other than 0 - exit with code 1.
	* m4sh.m4 (AS_TMPDIR): Likewise.
	* autoconf.in: Likewise. Also don't rely on exit == exit $?.
	* autoheader.in: Likewise.
	* autoreconf.in: Likewise.
	* tests/torture.at (Signal handling): New test for the above.

2001-06-01  Akim Demaille  <akim@epita.fr>

	* m4sugar.m4 (m4_defn, m4_undefine, m4_popdef): Clarify the error
	message.

2001-05-31  Akim Demaille  <akim@epita.fr>

	* acfunctions, acheaders, acidentifiers, acmakevars, acprograms:
	Add copyright and comments.
	* acheaders: Add stdint.h.
	Suggested by Paul Eggert.

2001-05-31  Akim Demaille  <akim@epita.fr>

	* atgeneral.m4 (AT_INIT): Use $SHELL.
	* atspecific.m4 (AT_CHECK_DEFINES): Skip HAVE_STDINT_H.

2001-05-31  Akim Demaille  <akim@epita.fr>

	* acgeneral.m4 (_AC_INCLUDES_DEFAULT_REQUIREMENTS): Include
	stdint.h.
	From Paul Eggert and Lars Hecking.

2001-05-31  Akim Demaille  <akim@epita.fr>

	* tests/base.at: Adjust line numbers in error messages.

2001-05-31  Akim Demaille  <akim@epita.fr>

	* tests/base.at, tests/m4sh.at: When using AC_PLAIN_SCRIPT be sure
	to emit the bangshe line.
	Reported by David Carter.

2001-05-30  Steven G. Johnson  <stevenj@alum.mit.edu>

	* aclang.m4 (AC_PROG_F77): Add Compaq's "fort" to the list of
	Fortran (95) compilers to check.

2001-05-29  Alexandre Duret-Lutz  <duret_g@epita.fr>

	* doc/autoconf.texi (Introduction, Pointers): Update the Autoconf
	Macro Archive URL.

2001-05-23  Pavel Roskin  <proski@gnu.org>

	* aclang.m4 (AC_PROG_CPP): Use `break' instead of `break 2' since
	_AC_PROG_PREPROC_WORKS_IFELSE expands arguments outside the loop.
	(AC_PROG_CXXCPP): Likewise.

2001-05-22  Akim Demaille  <akim@epita.fr>

	* config: New directory.
	* configure.in: AC_CONFIG_AUX_DIR it.
	* tests/atspecific.m4 (AT_CONFIGURE_AC): Adjust.

2001-05-22  Akim Demaille  <akim@epita.fr>

	* autoconf.in, autoreconf.in, autoheader.in, autoscan.in, ifnames.in,
	* autoupdate.in: Specify the Emacs mode.
	* acversion.m4.in: Rename as...
	* acversion.m4: this.
	* tests/Makefile.am (CLEANFILES): More garbage.

2001-05-22  Akim Demaille  <akim@epita.fr>

	* autoconf.sh, autoreconf.sh, autoheader.sh, autoscan.pl, ifnames.sh:
	Rename as...
	* autoconf.in, autoreconf.in, autoheader.in, autoscan.in, ifnames.in:
	these.

2001-05-21  Akim Demaille  <akim@epita.fr>

	* configure.in: Bump to 2.50a.
